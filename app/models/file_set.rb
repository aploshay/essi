# Generated by hyrax:models:install
class FileSet < ActiveFedora::Base
  include ::Hyrax::FileSetBehavior

  def language
    # Future: Use to set language on fileset creation.
    return try_language(:ocr_language).join("+") if
      try_language(:ocr_language).present?
    return try_language(ESSI.config.dig(:essi, :fileset_language)).join("+") if
      try_language(ESSI.config.dig(:essi, :fileset_language)).present?
    'eng'
  end

  private

  def try_language(language)
    (Array.wrap(language) || []).reject do |lang|
      Tesseract.languages[lang.to_sym].nil?
    end
  end
end
